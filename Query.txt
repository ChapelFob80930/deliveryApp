-- This is the name of the database that must be already created
USE delapdb;

-- Create the `users` table
CREATE TABLE users (
    UserId INT AUTO_INCREMENT PRIMARY KEY,
    Email VARCHAR(255) NOT NULL,
    Password VARCHAR(255) NOT NULL,
    Name VARCHAR(100) NOT NULL,
    Surname VARCHAR(100) NOT NULL,
    PhoneNumber VARCHAR(20)
);

-- Create the `orders` table
CREATE TABLE orders (
    OrderId INT AUTO_INCREMENT PRIMARY KEY,
    ReceiverId INT NOT NULL,
    SenderId INT,
    ReceiversAddress TEXT NOT NULL,
    OrderPrice FLOAT NOT NULL,
    EstimatedTime INT NOT NULL,
    OrderStatus ENUM('Pending', 'Accepted', 'Delivered') NOT NULL,
    DetailedDescription TEXT,
    FOREIGN KEY (ReceiverId) REFERENCES users(UserId),
    FOREIGN KEY (SenderId) REFERENCES users(UserId)
);

ALTER TABLE orders
ADD OrderDate DATE NOT NULL